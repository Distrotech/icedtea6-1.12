Index: openjdk/hotspot/src/share/vm/shark/llvmHeaders.hpp
===================================================================
--- openjdk.orig/hotspot/src/share/vm/shark/llvmHeaders.hpp	2011-04-08 11:48:09.270716001 +0200
+++ openjdk/hotspot/src/share/vm/shark/llvmHeaders.hpp	2011-04-08 11:49:54.714716002 +0200
@@ -43,7 +43,11 @@
 #include <llvm/ModuleProvider.h>
 #endif
 #include <llvm/Support/IRBuilder.h>
+#if SHARK_LLVM_VERSION >= 29
+#include <llvm/Support/Threading.h>
+#else
 #include <llvm/System/Threading.h>
+#endif
 #include <llvm/Target/TargetSelect.h>
 #include <llvm/Type.h>
 #include <llvm/ExecutionEngine/JITMemoryManager.h>
@@ -52,8 +56,12 @@
 #include <llvm/ExecutionEngine/JIT.h>
 #include <llvm/ADT/StringMap.h>
 #include <llvm/Support/Debug.h>
+#if SHARK_LLVM_VERSION >= 29
+#include <llvm/Support/Host.h>
+#else
 #include <llvm/System/Host.h>
 #endif
+#endif
 
 #include <map>
 
